---
import ArrowIcon from './ArrowIcon.astro';
import Icon from './Icon.astro';

// La logique des textes et des cellules reste la même.
const texts = {
  1: "JE VEUX CRÉER",
  4: "DES EXPÉRIENCES",
  9: "QUI",
  12: "DONNENT ENVIE",
  13: "DE RESTER",
  15: "DES EXPÉRIENCES",
  21: "QUI RACONTENT",
  22: "UNE HISTOIRE",
  25: "DES EXPÉRIENCES",
  26: "QUI SONT BELLES",
  27: "ET",
  35: "QUI FONCTIONNENT.",
};

const gridCells = Array(36).fill(null).map((_, index) => {
  const id = index + 1;
  return {
    id: id,
    text: texts[id] || null,
  };
});
---

<!-- --- STRUCTURE DU FOOTER (HTML + TAILWIND) --- -->
{/* MODIFICATION: Ajout de tracking-[-0.08em] pour resserrer les caractères */}
<footer class="h-screen w-full bg-transparent box-border p-4 lg:p-[26px_20px] font-['Poppins'] tracking-[-0.05em]">
  <div class="relative h-full w-full rounded-3xl lg:rounded-[40px] bg-[#111111] grid place-items-center overflow-hidden">
    
    <!-- Grille de fond unifiée et responsive -->
    <div class="absolute inset-0 z-0 p-4 lg:p-[32px_52px] grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-12 grid-rows-4 sm:grid-rows-3">
      {gridCells.map((cell, index) => {
        let visibilityClass = '';
        if (index >= 12 && index < 18) visibilityClass = 'hidden md:flex';
        else if (index >= 18 && index < 24) visibilityClass = 'hidden lg:flex';
        else if (index >= 24) visibilityClass = 'hidden xl:flex';
        else visibilityClass = 'flex';
        return (
          <div class={`group rounded-[20px] border border-[#222222] bg-[#111111] transition-colors duration-300 p-4 justify-start items-start hover:bg-[#222222] ${visibilityClass}`}>
            {cell.text && (
            <span class="hidden lg:block text-white uppercase text-sm transition-all duration-300 group-hover:translate-y-full">
                {cell.text}
              </span>
            )}
          </div>
        )
      })}
    </div>
    
    <!-- Îlots centraux -->
    <div class="relative z-10 flex flex-col items-center gap-4 w-full max-w-xs sm:max-w-md px-4 lg:px-0">
      
      <div class="bg-white text-black rounded-3xl p-6 flex flex-col items-start gap-2 text-left w-full lg:w-80 transition-all duration-300 ease-in-out lg:hover:w-[330px]">
        <a href="/projets" class="font-bold hover:underline transition-colors flex items-center gap-2">
          PROJETS <ArrowIcon variant="contact" class="w-3 h-3 text-black"/>
        </a>
        <a href="#" class="text-sm hover:underline transition-colors">Yumly</a>
        <a href="#" class="text-sm hover:underline transition-colors">Mōdulo</a>
        <a href="#" class="text-sm hover:underline transition-colors">Site web de l'APG</a>
        <a href="#" class="text-sm hover:underline transition-colors">Réalisations 3D</a>
      </div>

      <div class="bg-white text-black rounded-3xl p-4 flex flex-row items-center justify-center gap-4 text-left w-full lg:w-80 transition-all duration-300 ease-in-out lg:hover:w-[330px]">
        <a href="/contact" class="group button-contact flex items-center justify-center gap-2 py-2 px-4 rounded-full transition-all duration-300 hover:bg-black hover:text-white hover:px-6">
          <span class="whitespace-nowrap text-sm">Me contacter</span>
          <ArrowIcon variant="contact" class="w-3 h-3 text-black"/>
        </a>
        <a href="/cv.pdf" target="_blank" class="group button-cv flex items-center justify-center gap-2 py-2 px-6 rounded-full transition-all duration-300 hover:bg-black hover:text-white hover:px-8">
          <span class="whitespace-nowrap text-sm">CV</span>
          <ArrowIcon variant="cv" class="w-3 h-3 text-black"/>
        </a>
      </div>
      
      <div class="bg-white text-black rounded-3xl p-6 flex flex-row items-center justify-between gap-2 text-center w-full lg:w-80 transition-all duration-300 ease-in-out lg:hover:w-[330px]">
        <Icon name="logofooter" class="h-12 w-auto text-black"/>
        <div class="flex items-center gap-2">
          <a href="#" aria-label="Behance" class="transition-all duration-300 ease-in-out hover:-translate-y-1 delay-50">
            <Icon name="behance" class="h-7 w-7 lg:h-9 lg:w-9 text-black" hoverGradient="orange"/>
          </a>
          <a href="#" aria-label="Dribbble" class="transition-all duration-300 ease-in-out hover:-translate-y-1 delay-50">
            <Icon name="dribbble" class="h-7 w-7 lg:h-9 lg:w-9 text-black" hoverGradient="orange"/>
          </a>
          <a href="#" aria-label="LinkedIn" class="transition-all duration-300 ease-in-out hover:-translate-y-1 delay-50">
            <Icon name="linkedin" class="h-7 w-7 lg:h-9 lg:w-9 text-black" hoverGradient="orange"/>
          </a>
          <a href="mailto:votre.email@example.com" aria-label="Email" class="transition-all duration-300 ease-in-out hover:-translate-y-1 delay-50">
            <Icon name="mail" class="h-7 w-7 lg:h-9 lg:w-9 text-black" hoverGradient="green"/>
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>

